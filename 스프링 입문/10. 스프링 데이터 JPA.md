# ìŠ¤í”„ë§ ì…ë¬¸ ì •ë¦¬ #10

# âœ” ëª©í‘œ
ìŠ¤í”„ë§ ë°ì´í„° JPA ëŒ€í•´ ê³µë¶€í•´ë³´ì.

<br/>

# âœ” ëª©ì°¨
* ìŠ¤í”„ë§ ë°ì´í„° JPA
* í™˜ê²½ì„¤ì •
* ìŠ¤í”„ë§ ë°ì´í„° JPA íšŒì› ë¦¬í¬ì§€í† ë¦¬
* ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìŠ¤í”„ë§ ì„¤ì • ë³€ê²½
  
<br/>

# ğŸ’¡ 10-1 ìŠ¤í”„ë§ ë°ì´í„° JPA

ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ JPAë§Œ ì‚¬ìš©í•´ë„ ê°œë°œ ìƒì‚°ì„±ì´ ë§ì´ ì¦ê°€í•˜ê³ , ê°œë°œí•´ì•¼í•  ì½”ë“œë„ í™•ì—°íˆ ì¤„ì–´ë“ ë‹¤. 

ì—¬ê¸°ì— ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ë©´, ë¦¬í¬ì§€í† ë¦¬ì— êµ¬í˜„ í´ë˜ìŠ¤ ì—†ì´ ì¸í„°í˜ì´ìŠ¤ ë§Œìœ¼ë¡œ ê°œë°œì„ ì™„ë£Œí•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë°˜ë³µ ê°œë°œí•´ì˜¨ ê¸°ë³¸ CRUD ê¸°ëŠ¥ë„ ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ëª¨ë‘ ì œê³µí•œë‹¤.

ë”°ë¼ì„œ ê°œë°œìë“¤ì€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°œë°œí•˜ëŠ”ë°, ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.

>ì£¼ì˜  
ìŠ¤í”„ë§ ë°ì´í„° JPAëŠ” JPAë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤. ë”°ë¼ì„œ JPAë¥¼ ë¨¼ì € í•™ìŠµí•œ
í›„ì— ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ í•™ìŠµí•´ì•¼í•œë‹¤.

<br/>

# ğŸ’¡ 10-2 í™˜ê²½ì„¤ì •

JPA í™˜ê²½ì„¤ì •ê³¼ ë™ì¼í•˜ë‹¤.

## **build.gradle**

```java
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	runtimeOnly 'com.h2database:h2'
	compileOnly 'org.projectlombok:lombok'
	annotationProcessor 'org.projectlombok:lombok'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
```

`implementation 'org.springframework.boot:spring-boot-starter-data-jpa'`ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

`spring-boot-starter-data-jpa`ëŠ” jdbc ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ í¬í•¨í•œë‹¤.

<br/>

## **resources/application.properties**

```java
spring.datasource.url=jdbc:h2:tcp://localhost/~/test
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa

spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=none
```

* `show-sql` : JPAê°€ ìƒì„±í•˜ëŠ” SQLì„ ì¶œë ¥í•œë‹¤.
* `ddl-auto` : JPAëŠ” í…Œì´ë¸”ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë° none ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ ê¸°ëŠ¥ì„ ëˆë‹¤. create ë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í…Œì´ë¸”ë„ ì§ì ‘ ìƒì„±í•´ì¤€ë‹¤.

<br/>

# ğŸ’¡ 10-3 ìŠ¤í”„ë§ ë°ì´í„° JPA íšŒì› ë¦¬í¬ì§€í† ë¦¬

```java
public interface SpringDataJpaMemberRepository extends JpaRepository<Member, Long>, MemberRepository {
    @Override
    Optional<Member> findByName(String name);
}
```

* `JpaRepository`, `MemberRepository` ëŠ” ì¸í„°í˜ì´ìŠ¤ë‹¤. ë”°ë¼ì„œ ë‹¤ì¤‘ ìƒì†ì´ ê°€ëŠ¥í•˜ë‹¤.

* `SpringDataJpaMemberRepository` ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë–„ë¬¸ì— ìƒì†ì„ ë°›ì„ ë•Œ `extends` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

* `JpaRepository` ë¥¼ ìƒì†ë°›ìœ¼ë©´ ìŠ¤í”„ë§ ë°ì´í„° JPAê°€ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ìë™ ë“±ë¡ëœë‹¤.

* ì•„ë˜ ìŠ¤í”„ë§ ë°ì´í„° JPA ì œê³µ í´ë˜ìŠ¤ ê·¸ë¦¼ì²˜ëŸ¼ `JpaRepository` ì„ ìƒì†ë°›ëŠ” `SpringDataJpaMemberRepository` ëŠ” ê¸°ë³¸ì ì¸ CRUD(PK ê¸°ë°˜ì˜ ì¿¼ë¦¬), í˜ì´ì§• ê¸°ëŠ¥ì„ ì œê³µë°›ëŠ”ë‹¤.

* ìœ„ ì½”ë“œì™€ ê°™ì´ `findByName()` ì²˜ëŸ¼ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì— ì˜í•´ ë°”ë€” ìˆ˜ ìˆëŠ” ì¶”ìƒ ë©”ì†Œë“œë“¤ì€ JPAì˜ ë©”ì†Œë“œ ì´ë¦„ ê·œì¹™ì— ë”°ë¼ ì‘ì„±í•´ì£¼ë©´ ì•Œì•„ì„œ êµ¬í˜„ì²´ë¥¼ ì œê³µí•œë‹¤.

* ì˜ˆë¥¼ ë“¤ë©´ `findByNameAndAge()` ì¶”ìƒ ë©”ì†Œë“œë¥¼ ìƒì„±í•˜ë©´ `Member` í…Œì´ë¸”ì˜ `Name`, `Age` ì»¬ëŸ¼ìœ¼ë¡œ ì°¾ëŠ”ë‹¤. 

* ì‹¤ë¬´ì—ì„œëŠ” JPAì™€ ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , ë³µì¡í•œ ë™ì  ì¿¼ë¦¬ëŠ” Querydslì´ë¼ëŠ”
ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

* Querydslì„ ì‚¬ìš©í•˜ë©´ ì¿¼ë¦¬ë„ ìë°” ì½”ë“œë¡œ ì•ˆì „í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê³ , ë™ì 
ì¿¼ë¦¬ë„ í¸ë¦¬í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. 

* ì´ ì¡°í•©ìœ¼ë¡œ í•´ê²°í•˜ê¸° ì–´ë ¤ìš´ ì¿¼ë¦¬ëŠ” JPAê°€ ì œê³µí•˜ëŠ” ë„¤ì´í‹°ë¸Œ ì¿¼ë¦¬ë¥¼
ì‚¬ìš©í•˜ê±°ë‚˜, ì•ì„œ í•™ìŠµí•œ ìŠ¤í”„ë§ JdbcTemplateë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
<br/>

## **ìŠ¤í”„ë§ ë°ì´í„° JPA ì œê³µ í´ë˜ìŠ¤**

![e](https://user-images.githubusercontent.com/55661631/105964414-7d2f2e80-60c5-11eb-9b8c-934e4f49298c.PNG)

<br/>

# ğŸ’¡ 10-4 ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìŠ¤í”„ë§ ì„¤ì • ë³€ê²½

## **SpringConfig**

```java
@Configuration
public class SpringConfig {
    
    private final MemberRepository memberRepository;

    @Autowired
    public SpringConfig(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Bean
    public MemberService memberService(){
        return new MemberService(memberRepository);
    }
}
```

<br/>

# ì°¸ê³ 
* [ì¸í”„ëŸ° ìŠ¤í”„ë§ ì…ë¬¸ - ì½”ë“œë¡œ ë°°ìš°ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸, ì›¹ MVC, DB ì ‘ê·¼ ê¸°ìˆ ](https://www.inflearn.com)